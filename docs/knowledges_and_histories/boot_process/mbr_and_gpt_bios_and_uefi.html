<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MBR 和 GPT，BIOS 和 UEFI | SPICE and Wolf （暂定）</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="硬盘的分区表和电脑启动有什么关系？">
    <link rel="preload" href="/SPICE-and-Wolf/assets/css/0.styles.bd531b56.css" as="style"><link rel="preload" href="/SPICE-and-Wolf/assets/js/app.df0453c9.js" as="script"><link rel="preload" href="/SPICE-and-Wolf/assets/js/2.e2add5c1.js" as="script"><link rel="preload" href="/SPICE-and-Wolf/assets/js/8.6b54dfb2.js" as="script"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/10.d48b972b.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/11.94c4045f.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/12.1f900929.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/13.62625e7a.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/14.cc9292b5.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/15.bdcd8b23.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/16.1b84bc00.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/17.53272452.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/18.98a2b058.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/19.2ac84ad9.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/20.0e215edb.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/21.e2ed72e5.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/22.ef8861f5.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/23.53697ca9.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/24.0cb215a0.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/25.4cb81419.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/26.80bfc3f6.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/27.66c3808e.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/28.5118da9d.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/29.e734e2aa.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/3.cbd1593f.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/30.76668803.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/31.d5d58f77.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/32.cf5db7e1.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/33.7f6898a4.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/34.7de85ed5.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/35.d7e8dbe1.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/36.20210079.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/37.6634ae82.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/38.304a051f.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/39.f89ec55a.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/4.05d2b28f.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/40.4e340873.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/41.d26b5970.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/42.e2695be2.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/43.723cc31d.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/44.8e41a1db.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/45.ff921a62.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/46.04559bcb.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/5.62367596.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/6.89965624.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/7.8178534b.js"><link rel="prefetch" href="/SPICE-and-Wolf/assets/js/9.053d3169.js">
    <link rel="stylesheet" href="/SPICE-and-Wolf/assets/css/0.styles.bd531b56.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/SPICE-and-Wolf/" class="home-link router-link-active"><!----> <span class="site-name">SPICE and Wolf （暂定）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/SPICE-and-Wolf/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/SPICE-and-Wolf/knowledges_and_histories/boot_process/.html#" class="nav-link">
  Placeholder
</a></div> <a href="https://github.com/project-wolves/SPICE-and-Wolf" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/SPICE-and-Wolf/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/SPICE-and-Wolf/knowledges_and_histories/boot_process/.html#" class="nav-link">
  Placeholder
</a></div> <a href="https://github.com/project-wolves/SPICE-and-Wolf" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/SPICE-and-Wolf/" class="sidebar-heading clickable router-link-active open"><span>首页</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/SPICE-and-Wolf/plans.html" class="sidebar-link">规划中目录</a></li><li><a href="/SPICE-and-Wolf/drafts/" class="sidebar-link">施工中页面</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>总次</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/SPICE-and-Wolf/knowledges_and_histories/" aria-current="page" class="sidebar-link">科普和史话</a></li><li><a href="/SPICE-and-Wolf/experiences_from_writers/" class="sidebar-link">编者经验谈</a></li><li><a href="/SPICE-and-Wolf/install_arch_linux/" class="sidebar-link">安装 Arch Linux</a></li><li><a href="/SPICE-and-Wolf/softwares/" class="sidebar-link">使用各种软件</a></li><li><a href="/SPICE-and-Wolf/basic_usage/" class="sidebar-link">基本使用</a></li><li><a href="/SPICE-and-Wolf/troubleshooting/" class="sidebar-link">故障排除</a></li><li><a href="/SPICE-and-Wolf/virtualbox_install_and_usage/" class="sidebar-link">附录：安装和设置 VirtualBox</a></li><li><a href="/SPICE-and-Wolf/further_reading/" class="sidebar-link">前方的路</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mbr-和-gpt，bios-和-uefi"><a href="#mbr-和-gpt，bios-和-uefi" class="header-anchor">#</a> MBR 和 GPT，BIOS 和 UEFI</h1> <h2 id="bios-和-uefi-究竟是什么鬼"><a href="#bios-和-uefi-究竟是什么鬼" class="header-anchor">#</a> BIOS 和 UEFI 究竟是什么鬼</h2> <p>BIOS 的全称洋文叫“Basic Input/Output System”，根据名字就能看出这个东西是个“基础输入输出系统”，那么这个系统在哪里呢？实际上你是看不到的，除非把电脑拆开，会发现主板上有个 ROM 芯片，里面就包含了这个 BIOS 系统啦。这个系统大概在 1975 年前后被制作出来，刚开始是一个仅供 IBM PC 用的专有软件，但是之后被各种逆向工程，之后用的人多了就成了一个标准了。</p> <p>BIOS 被用来在开机的时候对硬件进行初始化，并且加载下一步的Payload（一般情况下是 Second-stage Bootloader）。对于大部分计算机系统，在上电之后会从一个可以直接寻址的ROM的头部开始取指执行。此处的BIOS代码会初始化Cache和内存，以建立Stack，建立C语言所需的运行环境，并且进行“Relocate”把自己从ROM拷贝入RAM以加快运行速度。之后开始初始化总线控制器，枚举 PCI 设备，运行 PCI Rom 上的代码，探测 USB ，网卡和其他外部设备，并且根据用户的配置调整硬件选项。最后会根据用户的配置从外部设备如硬盘，USB大容量存储设备乃至互联网上寻找Payload，加载到内存，并执行。对于传统的块设备例如硬盘，BIOS可以从其第 0 个区扇区读取 MBR （Master Boot Record） 来寻找 Payload。</p> <p>同时BIOS也会提供一定的配置信息表和API保留在内存中给之后的 Second-stage Bootloader 和 操作系统。例如 ACPI 的 DSDT SSDT 表 可以告诉操作系统硬件的读取操作方式。而 INT10h API 则可以在操作系统的图形设施建立之前提供简易的屏幕绘图方式。</p> <p>BIOS 自被开发出至今，已经接近 40 多年了。而 BIOS 的缺陷也逐渐的凸显出来： 安全性？ CIH 病毒？ 可扩展性？ 在X86的实模式下仅有1M内存可用 同时 MBR 表是不支持 2 TB 以上容量的哦。</p> <p>所以在 1998 年前后，BIOS 的问题逐渐凸显出来，而 Intel 开发出来了替换 BIOS 的东西——Intel Boot Initiative，而后更名为 EFI（Extensible Firmware Interface，可扩展固件接口）。</p> <p>在 2005 年，EFI 推出了最后一个版本 1.10，之后被废弃掉了，而后改名为 UEFI。而 The Unified Extensible Firmware Interface Forum （UEFI Forum）则成为了维护 UEFI 标准的论坛（类似如 CA 论坛等…）</p> <p>还记得本文前面提到的 MBR 表么？MBR 表最大支持的磁盘是 2 TB 的，对于越来越便宜的存储设备来说，2 TB 实在是太小啦。所以 Intel 公司又开发了一个替代 MBR 的分区表标准（2010 年之后成为 UEFI 标准的一部分），叫 GPT（GUID Partition Table），GPT 表最高可以支持 8 ZB（约合 9444732965 TB） 每扇区的空间大小，反正我觉得我这辈子是看不到超过 9444732965 TB 的磁盘分区了 😦。</p> <p>UEFI 不仅能读取分区表，还能自动支持文件系统。所以它不像 BIOS，已经没有仅仅 440 字节可执行代码即 MBR 的限制了，它完全用不到 MBR。</p> <p>而 UEFI 需要一个 ESP （EFI System Partition）分区，里面有 UEFI 所要用到的一些文件。计算机供应商可以在 /EFI/ 文件夹里放官方指定的文件，还能用固件或它的 shell，即 UEFI shell，来启动引导程序。ESP 分区需要为 FAT32 格式以保证最大的兼容性。建议 ESP 分区为 512 MB。</p> <p>UEFI 主流都支持 MBR 和 GPT 分区表。Apple-Intel Macs 上的 EFI 还支持 Apple 专用分区表。绝大部分 UEFI 固件支持软盘上的 FAT12，硬盘上的 FAT16、FAT32 文件系统，以及 CD/DVDs 的 IS09660 和 UDF。Intel Macs 的 EFI 还额外支持 HFS/HFS+ 文件系统。</p> <p>而不得不提到的一个东西就是 Secure Boot，这个 Secure Boot 原来是为了帮助系统只运行签过名（Signed）的内核，以避免如 Bootkit 之类的后门的入侵。不过对于大公司来说，压榨自由是他们最爱干的事情，所以这个 Secure Boot 被微软公司和电脑厂商联手做成了只允许运行他们指定的系统。不过一般发行版都已经自带了经过微软签名的内核，所以是可以安装的。即使没有签过名也不要担心，绝大部分厂商都允许你把 Secure Boot 设置为 Custom 模式，这样你就可以添加自己的公钥然后对内核进行签名，之后就可以运行啦。</p> <p>有些 GNU/Linux 用户会把这种功能叫做“限制启动”（Restricted Boot），以表达对 M$ 的不满（雾）</p> <h2 id="前面说了那么多废话，那么问题来了，怎么区分咱现在是那一种启动方式呢"><a href="#前面说了那么多废话，那么问题来了，怎么区分咱现在是那一种启动方式呢" class="header-anchor">#</a> 前面说了那么多废话，那么问题来了，怎么区分咱现在是那一种启动方式呢~</h2> <p>在 Windows 中的话：</p> <p>首先打开设置 ( Windows 8/8.1 叫做 &quot;电脑设置&quot;),然后通过 &quot;更新和恢复&quot; -&gt; &quot;恢复&quot; -&gt; &quot;高级启动&quot; 重启电脑.</p> <p>如果是 UEFI 启动的话,大概是这个样子:</p> <p><img src="/SPICE-and-Wolf/assets/img/0.0ea02762.png" alt="UEFI 系统启动之后大概像这样"></p> <p>没错就是有个 &quot;使用设备&quot; 的选项 😂</p> <ul><li>或者同时按下键盘上的 Windows 徽标键（就是有 Windows 标志那个） 和 R 键，会打开“运行” 对话框。</li></ul> <p><img src="/SPICE-and-Wolf/assets/img/1.32025bcd.png" alt="“运行”对话框"></p> <p>在里面输入 <code>msinfo32</code> 然后回车（按 Enter 键）确认，打开”系统信息”应用。</p> <p><img src="/SPICE-and-Wolf/assets/img/2.59ad8966.png" alt="“系统信息”窗口"></p> <p>看“BIOS模式”里是不是 UEFI 😂😂</p> <ul><li>再或者打开磁盘管理（Windows 8 以后的系统可以通过按下 Windows + X 的菜单里找到 “磁盘管理”）</li></ul> <p><img src="/SPICE-and-Wolf/assets/img/01.e35a5075.png" alt="磁盘管理在这~"></p> <p>嗯，大概就是这样子的呗 (虽然具体的磁盘分区可能和咱的不一样)</p> <p><img src="/SPICE-and-Wolf/assets/img/02.dd8ec779.png" alt="大概长这样~"></p> <p>看汝的硬盘上有没有一个 EFI 系统分区 😂😂😂</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/project-wolves/SPICE-and-Wolf/edit/master/knowledges_and_histories/boot_process/mbr_and_gpt_bios_and_uefi.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/SPICE-and-Wolf/assets/js/app.df0453c9.js" defer></script><script src="/SPICE-and-Wolf/assets/js/2.e2add5c1.js" defer></script><script src="/SPICE-and-Wolf/assets/js/8.6b54dfb2.js" defer></script>
  </body>
</html>
