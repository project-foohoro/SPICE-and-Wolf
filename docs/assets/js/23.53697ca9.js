(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{436:function(t,s,a){"use strict";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ufw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ufw"}},[t._v("#")]),t._v(" ufw")]),t._v(" "),a("p",[t._v("UFW 全称为 Uncomplicated Firewall，是 Ubuntu 系统上默认的防火墙组件, 为了轻量化配置 iptables 而开发的一款工具。\nUFW 提供一个非常友好的界面用于创建基于IPV4，IPV6的防火墙规则。")]),t._v(" "),a("p",[t._v("但是，UFW 是没有图形化用户界面的，它使用指令列操作，所以，操作起来就不是那么的方便，有人帮它写了个图形化用户界面，名字就叫做“Gufw”。")]),t._v(" "),a("h1",{attrs:{id:"基本用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[t._v("#")]),t._v(" 基本用法")]),t._v(" "),a("p",[t._v("ufw的用法十分简单，简单可以概括为如下内容")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认入网规则全部拒绝")]),t._v("\nufw default deny\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许22号、TCP/UDP协议、从任何位置入网请求")]),t._v("\nufw allow "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许SSH协议、从任何位置入网请求")]),t._v("\nufw allow "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v("\nufw allow http\nufw allow https\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启用防火墙")]),t._v("\nufw "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示防火墙状态和规则数字")]),t._v("\nufw status numbered\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除2号规则")]),t._v("\nufw delete "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 阻止192.168.1.5对所有端口的入网请求")]),t._v("\nufw deny from "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.5 to any\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 阻止192.168.1.5对所有443（HTTPS）的入网请求")]),t._v("\nufw deny from "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.5 to any port "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看ufw日志")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("less")]),t._v(" /var/log/ufw.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重置ufw")]),t._v("\nufw reset\n")])])]),a("h1",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("p",[t._v("ufw 的规则是匹配模式。 意味着它的规则是从上到下，匹配到符合规则的就停止。\n举个例子，如果你的网站开启了 ufw 允许80入网，然后通过"),a("code",[t._v("ufw deny from 192.168.1.5 to any")]),t._v("会发现不生效的\n聪明的你一定想到了，那插入规则到第一行不就得了。")]),t._v(" "),a("h2",{attrs:{id:"禁止14-3-20-228访问443，插入规则到第一行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁止14-3-20-228访问443，插入规则到第一行"}},[t._v("#")]),t._v(" 禁止14.3.20.228访问443，插入规则到第一行")]),t._v(" "),a("p",[a("code",[t._v("ufw insert 1 deny from 14.3.20.228 to any port 443")])]),t._v(" "),a("h1",{attrs:{id:"除了deny和allow……"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#除了deny和allow……"}},[t._v("#")]),t._v(" 除了deny和allow……")]),t._v(" "),a("p",[t._v("除了 deny，还有 reject 和 limit 两种语法，根据 manual，他们的区别是：")]),t._v(" "),a("ul",[a("li",[t._v("limit： connection rate limiting ufw 会允许连接到该端口，但是一个 IP 如果在 30 秒钟之内尝试 6 次，那么就暂时封禁。这也就意味着"),a("code",[t._v("ufw limit ssh")]),t._v("在某些情况下是有必要的")]),t._v(" "),a("li",[t._v("reject：给出拒绝原因而不是 deny 直接拒绝什么提示都没有（客户端会等待到超时）")])])])}),[],!1,null,null,null);s.default=e.exports}}]);